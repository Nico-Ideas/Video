<!doctype html>
<html>

<head>
    <meta charset="utf-8" />

    <title>CinnamoRoll</title>
    <link rel="icon" type="image/png" href="assets/Cinamon.png">
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.14/dist/face-api.js"></script>
    <!-- Brython para ejecutar Python en el navegador -->
    <script src="https://cdn.jsdelivr.net/npm/brython@3.12.3/brython.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/brython@3.12.3/brython_stdlib.js"></script>
    <script defer src="script.js"></script>
</head>

<body onload="brython()">
    <!-- Script Python para Cinnamoroll -->
    <script type="text/python" src="cinnamonroll_brython.py"></script>
    <div class="page-greeting">Feliz dia de la amistad</div>
    <div class="falling-stars" aria-hidden="true">
        <span style="--x: 6%; --delay: -2s; --size: 6px; --duration: 9s;"></span>
        <span style="--x: 12%; --delay: -5s; --size: 4px; --duration: 11s;"></span>
        <span style="--x: 18%; --delay: -7s; --size: 5px; --duration: 10s;"></span>
        <span style="--x: 24%; --delay: -3s; --size: 7px; --duration: 12s;"></span>
        <span style="--x: 30%; --delay: -6s; --size: 4px; --duration: 8s;"></span>
        <span style="--x: 36%; --delay: -4s; --size: 6px; --duration: 13s;"></span>
        <span style="--x: 42%; --delay: -8s; --size: 5px; --duration: 9s;"></span>
        <span style="--x: 48%; --delay: -1s; --size: 4px; --duration: 10s;"></span>
        <span style="--x: 54%; --delay: -9s; --size: 6px; --duration: 12s;"></span>
        <span style="--x: 60%; --delay: -3s; --size: 5px; --duration: 8s;"></span>
        <span style="--x: 66%; --delay: -6s; --size: 7px; --duration: 11s;"></span>
        <span style="--x: 72%; --delay: -4s; --size: 4px; --duration: 9s;"></span>
        <span style="--x: 78%; --delay: -7s; --size: 6px; --duration: 12s;"></span>
        <span style="--x: 84%; --delay: -2s; --size: 5px; --duration: 10s;"></span>
        <span style="--x: 90%; --delay: -5s; --size: 4px; --duration: 13s;"></span>
    </div>
    <div class="container">
        <div class="glass">
            <div class="shine"></div>
            <div class="bouquet">
                <div class="peonia">
                    <span class="flower-name">PeonÃ­a</span>
                    <div class="peonia-stem"></div>
                    <div class="peonia-leaf peonia-leaf-1"></div>
                    <div class="peonia-leaf peonia-leaf-2"></div>
                    <div class="peonia-petals">
                        <div class="peonia-center"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-petal"></div>
                        <div class="peonia-inner-petal"></div>
                        <div class="peonia-inner-petal"></div>
                        <div class="peonia-inner-petal"></div>
                        <div class="peonia-inner-petal"></div>
                    </div>
                </div>

                <div class="tulipan">
                    <span class="flower-name">TulipÃ¡n</span>
                    <div class="tulipan-stem"></div>
                    <div class="tulipan-leaf tulipan-leaf-1"></div>
                    <div class="tulipan-leaf tulipan-leaf-2"></div>
                    <div class="tulipan-petals">
                        <div class="tulipan-petal"></div>
                        <div class="tulipan-petal"></div>
                        <div class="tulipan-petal"></div>
                        <div class="tulipan-petal"></div>
                        <div class="tulipan-petal"></div>
                        <div class="tulipan-petal"></div>
                    </div>
                </div>

                <div class="lirio">
                    <span class="flower-name">Lirio</span>
                    <div class="lirio-stem"></div>
                    <div class="lirio-leaf lirio-leaf-1"></div>
                    <div class="lirio-leaf lirio-leaf-2"></div>
                    <div class="lirio-petals">
                        <div class="lirio-petal"></div>
                        <div class="lirio-petal"></div>
                        <div class="lirio-petal"></div>
                        <div class="lirio-petal"></div>
                        <div class="lirio-petal"></div>
                        <div class="lirio-petal"></div>
                        <div class="lirio-stamen"></div>
                        <div class="lirio-stamen"></div>
                        <div class="lirio-stamen"></div>
                    </div>
                </div>
            </div>
            <div class="pot">
                <div class="pot-sign">Para que no te sientas espectadora</div>
            </div>
        </div>
    </div>

    <!-- CÃ¡mara -->
    <div class="camera-box">
        <video id="camera-feed" autoplay muted playsinline></video>
        <canvas id="overlay-canvas"></canvas>
        <span id="camera-status">Iniciando...</span>
    </div>

    <!-- Cinnamonroll que aparece al sonreÃ­r (estilo turtle) -->
    <div id="cinnamonroll" class="cinnamonroll">
        <canvas id="cinna-canvas" width="600" height="600"></canvas>
    </div>

    <!-- Audio de Cinnamonroll -->
    <audio id="cinna-audio" src="assets/Cinamon_Cancion.mp3" loop></audio>

    <!-- Botones de control -->
    <div class="test-buttons">
        <button id="btn-camera" onclick="toggleCamera()">ðŸ“¹ CÃ¡mara</button>
        <button id="btn-happy" onclick="testHappy()">ðŸ˜Š Felicidad</button>
        <button id="btn-sad" onclick="testSad()">ðŸ˜¢ Tristeza</button>
        <button id="btn-music" onclick="toggleMusic()">ðŸŽµ MÃºsica</button>
    </div>

    <!-- Popup de bienvenida -->
    <div id="welcome-popup" class="welcome-popup">
        <div class="welcome-popup-content">
            <button id="close-welcome" class="welcome-close" aria-label="Cerrar">Ã—</button>
            <h2 class="welcome-title">Bienvenido BetaTester</h2>
            <p class="welcome-text">
                Este proyecto esta en fase de prueba porque estoy recien aprendiendo
                a usar la IA con la camara.
            </p>
            <p class="welcome-text">Como funciona:</p>
            <ul class="welcome-list">
                <li>Activa la camara con el boton.</li>
                <li>Si sonries, aparece Cinnamoroll.</li>
                <li>Si estas triste, aparece un video para animarte.</li>
                <li>Si haces click en el Cinnamoroll sin la camara, dira frases.</li>
                <li>Si haces click en boton de musica se reproducira una cancion.</li>
                <li>En el caso que no funcione bien la ia, hay botones de ayuda.</li>
                <li>Me disculpo de antemano si hay algun bug, estoy trabajando para solucionarlo (en realidad no y no moleste).</li>
            </ul>
        </div>
    </div>

    <!-- Popup de Video Anti-Tristeza -->
    <div id="meme-popup" class="meme-popup">
        <div class="meme-popup-content">
            <button id="close-meme" class="meme-close" aria-label="Cerrar">Ã—</button>
            <p id="meme-message">Â¡No estÃ©s triste! Mira esto</p>
            <video id="sad-video" loop playsinline>
                <source src="assets/Fuera_depresion.mp4" type="video/mp4">
            </video>
            <p class="video-hint">Se detendrÃ¡ cuando sonrÃ­as</p>
        </div>
    </div>
</body>

</html>